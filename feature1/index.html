<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Feature 1: Agricultural Product Records</title>
  <!-- Clean, modern fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet"/>
  <style>
    :root{
      /* Brand: Dark Jungle Green accents */
      --primary:#1A2421;
      --primary-600:#20332E;
      --primary-700:#0F1916;
      --bg:#FFFFFF;             /* body background (white) */
      --surface:#0F1916;        /* container background (dark) */
      --ink:#EAF5F1;            /* text on dark surfaces */
      --muted:#A9B7B3;
      --accent:#9FE6C9;
      --teal:#2DD4BF;
      --amber:#F4C95D;
      --border:#2A3B36;
      --ring:#1A242166;
      --radius: 14px;
      --radius-lg: 20px;
      --shadow-sm: 0 8px 22px rgba(0, 0, 0, .12);
      --shadow-md: 0 16px 44px rgba(0, 0, 0, .18);
      --shadow-lg: 0 26px 70px rgba(0, 0, 0, .22);
      --transition: all .28s ease;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    /* Body is white */
    body{
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: #1A2421;                /* dark text outside container */
      background: var(--bg);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      color-scheme: light;
    }
    /* Container stays dark */
    .container{
      max-width: 1400px;
      margin: 0 auto;
      background: var(--surface);
      color: var(--ink);
      border-radius: 22px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow-lg);
      overflow: hidden;
    }
    /* Header (kept dark gradient) */
    .header{
      background:
        radial-gradient(140% 120% at 100% 0%, #2F4A43, transparent 60%),
        linear-gradient(120deg, var(--primary) 0%, var(--primary-600) 100%);
      color:#F2FFFC;
      padding: 36px 30px;
      text-align:center;
      position: relative;
      overflow: hidden;
    }
    .header::after{
      content:""; position:absolute; right:-120px; top:-140px;
      width: 520px; height: 520px; border-radius:50%;
      background: rgba(255,255,255,.12); filter: blur(50px);
      pointer-events:none;
    }
    .header h1{
      font-family: 'Poppins', sans-serif;
      font-size: clamp(1.9rem, 3.8vw, 2.6rem);
      margin-bottom: 10px;
      line-height: 1.15;
      letter-spacing: .2px;
    }
    .header p{
      font-size: clamp(.95rem, 2vw, 1.1rem);
      opacity:.95;
      max-width: 900px;
      margin: 0 auto;
    }
    /* CONTENT SECTION: switched to light mode */
    .content{
      padding: 30px;
      background: #FFFFFF;
      color: #1A2421;
    }
    .section{ margin-bottom: 40px; }
    .section h2{
      font-size: clamp(1.2rem, 2.6vw, 1.6rem);
      color: #1A2421;
      margin-bottom: 16px;
      font-weight: 700;
      padding-bottom: 10px;
      border-bottom: 2px solid #E6ECEA;
    }
    .controls{
      display: flex; gap: 12px; margin-bottom: 18px; flex-wrap: wrap; align-items: center;
    }
    /* Inputs inside content (light) */
    .content .search-box,
    .content .controls input[type="text"],
    .content .controls input[type="number"]{
      padding: 12px 14px;
      border: 1.8px solid #E0E6E4;
      border-radius: 12px;
      font-size: 14px;
      width: 300px;
      transition: var(--transition);
      background: #FFFFFF;
      box-shadow: inset 0 1px 0 rgba(0,0,0,.02);
      color: #1A2421;
    }
    .content .controls input[type="number"]{ width: 260px; max-width: 100%; }
    .content .search-box::placeholder,
    .content .controls input[type="text"]::placeholder,
    .content .controls input[type="number"]::placeholder { color: #8A9794; }
    .content .search-box:focus,
    .content .controls input[type="text"]:focus,
    .content .controls input[type="number"]:focus{
      outline: none;
      border-color: #C9DAD5;
      box-shadow: 0 0 0 4px rgba(26,36,33,.14);
    }
    /* Buttons (unchanged colors) */
    .btn{
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 700;
      transition: var(--transition);
      text-decoration: none;
      display: inline-block;
      color: #fff;
    }
    .btn-primary{
      background: linear-gradient(180deg, var(--primary-600), var(--primary));
      box-shadow: var(--shadow-sm);
    }
    .btn-primary:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); }
    .btn-secondary{
      background: #2BAA78; color: #fff;
    }
    .btn-secondary:hover{ background: #228B63; }
    .btn-edit{
      background: #22C55E; color: #fff; padding: 8px 16px; font-size: 12px; border-radius: 10px;
    }
    .btn-edit:hover{ background: #16A34A; }
    .btn-delete{
      background: #EF4444; color: #fff; padding: 8px 16px; font-size: 12px; border-radius: 10px;
    }
    .btn-delete:hover{ background: #DC2626; }
    /* TABLES inside content: light mode with brand header */
    .content .table-container{
      overflow-x: auto;
      border-radius: 16px;
      border: 1px solid #E6ECEA;
      box-shadow: var(--shadow-sm);
      background: #FFFFFF;
    }
    .content table{ width: 100%; border-collapse: collapse; background: transparent; font-size: 14px; }
    .content th{
      position: sticky; top: 0; z-index: 1;
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)),
        linear-gradient(120deg, var(--primary) 0%, var(--primary-600) 100%);
      color: #F2FFFC;
      padding: 14px;
      text-align: left;
      font-weight: 800;
      letter-spacing: .2px;
      border-bottom: 1px solid #21322D;
    }
    .content td{
      padding: 12px 14px;
      border-bottom: 1px solid #EAEFF0;
      color: #1F2D2A;
      vertical-align: middle;
    }
    .content tbody tr:nth-child(even){ background: #FAFBFB; }
    .content tbody tr:hover{ background: #F3F7F6; transition: background .18s ease; }
    /* Traceability result card in content (light) */
    .content #traceabilityResult{
      margin-top: 14px;
      padding: 16px;
      background: #FFFFFF;
      border: 1px solid #E6ECEA;
      border-radius: 14px;
      box-shadow: var(--shadow-sm);
      color: #1A2421;
      min-height: 24px;
    }
    /* Modals remain dark (unchanged) */
    .modal{
      display: none;
      position: fixed; inset: 0;
      z-index: 1000;
      background: rgba(0,0,0,.55);
      padding: 20px;
      overflow: auto;
    }

    .modal-content{
      background: #111B18;
      color: #E8F6F2;
      backdrop-filter: blur(6px);
      margin: 5% auto;
      padding: 24px;
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--border);
      animation: slideIn .22s ease-out;
    }
    .modal-header{
      display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px;
      padding-bottom: 10px; border-bottom: 1px solid var(--border);
    }
    .modal-header h3{
      font-size: 1.25rem; color: #D5EEE7;
    }
    .close{
      color: #A3B1AD; font-size: 28px; font-weight: bold; cursor: pointer; line-height: 1;
    }
    .close:hover{ color: #F2FFFC; }
    .form-group{ margin-bottom: 16px; }
    .form-group label{
      display: block; margin-bottom: 6px; font-weight: 700; color: #D6E9E4; font-size: .95rem;
    }
    .form-group input,
    .form-group select{
      width: 100%;
      padding: 12px 12px;
      border: 1.8px solid #2B3B37;
      border-radius: 12px;
      font-size: 14px;
      transition: var(--transition);
      background: #0F1916;
      color: var(--ink);
    }
    .form-group input::placeholder,
    .form-group select::placeholder { color: #8AA39C; }
    .form-group input:focus,
    .form-group select:focus{
      outline: none;
      border-color: #2E4A42;
      box-shadow: 0 0 0 4px var(--ring);
    }
    .modal-footer{
      display: flex; gap: 10px; justify-content: flex-end; margin-top: 10px;
    }
    /* Motion */
    @keyframes slideIn{
      from{ transform: translateY(18px); opacity: 0; }
      to{ transform: translateY(0); opacity: 1; }
    }
    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; }
    }
    /* Responsive */
    @media (max-width: 768px){
      .controls{ flex-direction: column; align-items: stretch; }
      .content .search-box,
      .content .controls input[type="number"],
      .content .controls input[type="text"]{ width: 100%; }
      .header h1{ font-size: 2rem; }
      .content{ padding: 20px; }
      .content thead th{ font-size: 13px; }
      .content tbody td{ font-size: 13px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Agricultural Products, Crop and Harvest Information</h1>
    </div>
    <div class="content">
      <!-- Packages Section -->
      <div class="section">
        <h2>Product Details</h2>
        <div class="controls">
          <button class="btn btn-primary" onclick="openPackageModal()">+ Add Package</button>
          <button class="btn btn-secondary" onclick="refreshPackages()" title="Reload packages">ðŸ”„ Refresh</button>
          <input type="text" class="search-box" id="packageSearch" placeholder="Search packages..." onkeyup="searchPackages()">
        </div>
        <div class="table-container">
          <table id="packagesTable">
            <thead>
              <tr>
                <th>SKU</th>
                <th>Product Name</th>
                <th>Storage Requirements</th>
                <th>Packaging Details</th>
                <th>Production Quantity</th>
                <th>Production Date</th>
                <th>Warehouse</th>
                <th>Factory</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="packagesTableBody">
              <!-- Data will be loaded here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Crops Section (moved above Harvests) -->
      <div class="section">
        <h2>Crop Records</h2>
        <div class="controls">
          <button class="btn btn-primary" onclick="openCropModal()">+ Add Crop</button>
          <button class="btn btn-secondary" onclick="refreshCrops()" title="Reload crops">ðŸ”„ Refresh</button>
          <input type="text" class="search-box" id="cropSearch" placeholder="Search crops..." onkeyup="searchCrops()">
        </div>
        <div class="table-container">
          <table id="cropsTable">
            <thead>
              <tr>
                <th>Crop ID</th>
                <th>Crop Name</th>
                <th>Crop Type</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="cropsTableBody">
              <!-- Data will be loaded here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Harvests Section (now below Crops) -->
      <div class="section">
        <h2>Harvest Records</h2>
        <div class="controls">
          <button class="btn btn-primary" onclick="openHarvestModal()">+ Add Harvest</button>
          <button class="btn btn-secondary" onclick="refreshHarvests()" title="Reload harvests">ðŸ”„ Refresh</button>
          <input type="text" class="search-box" id="harvestSearch" placeholder="Search harvests..." onkeyup="searchHarvests()">
        </div>
        <div class="table-container">
          <table id="harvestsTable">
            <thead>
              <tr>
                <th>Harvest ID</th>
                <th>Harvest Name</th>
                <th>Harvest Type</th>
                <th>Quantity</th>
                <th>Shelf Life</th>
                <th>Farm</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="harvestsTableBody">
              <!-- Data will be loaded here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Crop Sowing Section -->
      <div class="section">
        <h2>Crop Sowing Records</h2>
        <div class="controls">
          <button class="btn btn-primary" onclick="openSowingModal()">+ Add Sowing</button>
          <button class="btn btn-secondary" onclick="refreshSowings()" title="Reload sowings">ðŸ”„ Refresh</button>
          <input type="text" class="search-box" id="sowingSearch" placeholder="Search sowings..." onkeyup="searchSowings()">
        </div>
        <div class="table-container">
          <table id="sowingsTable">
            <thead>
              <tr>
                <th>Crop ID</th> 
                <th>Sowing ID</th> 
                <th>Crop Name</th>
                <th>Harvest Name</th>
                <th>Plant Date</th>
                <th>Harvest Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="sowingsTableBody">
              <!-- Data will be loaded here -->
            </tbody>
          </table>
        </div>
      </div>
      <!-- Traceability Section -->
      <div class="section">
        <h2>Product Traceability</h2>
        <div class="controls">
          <input type="number" id="traceProductId" placeholder="Enter Packaged Product ID">
          <button class="btn btn-primary" onclick="lookupTraceability()">Lookup</button>
        </div>
        <div id="traceabilityResult"></div>
      </div>
    </div>
  </div>
  <!-- Crop Modal -->
  <div id="cropModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="cropModalTitle">Add New Crop</h3>
        <span class="close" onclick="closeCropModal()">&times;</span>
      </div>
      <form id="cropForm">
        <div class="form-group">
          <label for="cropName">Crop Name *</label>
          <input type="text" id="cropName" required>
        </div>
        <div class="form-group">
          <label for="cropType">Crop Type *</label>
          <select id="cropType" required>
            <option value="">Select crop type</option>
            <option value="Cereal">Cereal</option>
            <option value="Vegetable">Vegetable</option>
            <option value="Fruit">Fruit</option>
            <option value="Legume">Legume</option>
          </select>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeCropModal()">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="saveCrop()">Save Crop</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Harvest Modal -->
  <div id="harvestModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="harvestModalTitle">Add New Harvest</h3>
        <span class="close" onclick="closeHarvestModal()">&times;</span>
      </div>
      <form id="harvestForm">
        <div class="form-group">
          <label for="farmSelect">Farm *</label>
          <select id="farmSelect" required>
            <option value="">Select Farm</option>
          </select>
        </div>
        <div class="form-group">
          <label for="harvestName">Harvest Name *</label>
          <input type="text" id="harvestName" required>
        </div>
        <div class="form-group">
          <label for="harvestType">Harvest Type *</label>
          <input type="text" id="harvestType" required>
        </div>
        <div class="form-group">
          <label for="harvestQuantity">Harvest Quantity *</label>
          <input type="number" id="harvestQuantity" step="0.01" required>
        </div>
        <div class="form-group">
          <label for="harvestShelfLife">Shelf Life *</label>
          <input type="text" id="harvestShelfLife" required>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeHarvestModal()">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="saveHarvest()">Save Harvest</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Package Modal -->
  <div id="packageModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="packageModalTitle">Add New Package</h3>
        <span class="close" onclick="closePackageModal()">&times;</span>
      </div>
      <form id="packageForm">
    <div class="form-group">
        <label for="batchSelect">Package Batch *</label>
        <select id="batchSelect" required>
            <option value="">Select Batch</option>
        </select>
        <small style="display:block;margin-top:6px;opacity:.8;">
            Choose a batch to auto-fill product details.
        </small>
    </div>
    <div class="form-group">
        <label for="productName">Product Name *</label>
        <input type="text" id="productName" required>
    </div>
    <div class="form-group">
        <label for="storageRequirements">Storage Requirements *</label>
        <select id="storageRequirements" required>
            <option value="">Select Storage Requirements</option>
            <option value="Cool Dry Place">Cool Dry Place</option>
            <option value="Refrigerated">Refrigerated</option>
            <option value="Frozen">Frozen</option>
            <option value="Room Temperature">Room Temperature</option>
            <option value="Controlled Atmosphere">Controlled Atmosphere</option>
        </select>
    </div>
    <div class="form-group">
        <label for="packagingDetails">Packaging Details *</label>
        <select id="packagingDetails" required>
            <option value="">Select Packaging Details</option>
            <option value="Metal Can">Metal Can</option>
            <option value="Paper Bag">Paper Bag</option>
            <option value="Plastic Bottle">Plastic Bottle</option>
            <option value="Glass Jar">Glass Jar</option>
            <option value="Cardboard Box">Cardboard Box</option>
        </select>
    </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closePackageModal()">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="savePackage()">Save Package</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Sowing Modal -->
  <div id="sowingModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="sowingModalTitle">Add New Sowing</h3>
        <span class="close" onclick="closeSowingModal()">&times;</span>
      </div>
    <form id="sowingForm">
      <div class="form-group">
        <label for="sowingCropSelect">Crop *</label>
        <select id="sowingCropSelect" required>
          <option value="">Select Crop</option>
        </select>
      </div>
      <div class="form-group">
        <label for="sowingHarvestSelect">Harvest *</label>
        <select id="sowingHarvestSelect" required>
          <option value="">Select Harvest</option>
        </select>
      </div>
      <div class="form-group">
        <label for="plantDate">Plant Date *</label>
        <input type="date" id="plantDate" required>
      </div>
      <div class="form-group">
        <label for="sowingHarvestDate">Harvest Date *</label>
        <input type="date" id="sowingHarvestDate" required>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeSowingModal()">Cancel</button>
        <button type="button" class="btn btn-primary" onclick="saveSowing()">Save Sowing</button>
      </div>
    </form>
    </div>
  </div>
  <!-- PDF libs (put these above your script.js) -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js"></script>
  <!-- your existing app script -->
  <script src="script.js"></script>
</body>
</html>
